---
title: "Настройка OAuth2-авторизации Google-аккаунтов в NextCloud"
date: 2019-03-24
weight: 10
description: >
  Настройка OAuth2-авторизации Google-аккаунтов в NextCloud
tags:
  - NextCloud
  - OAuth2
---

2019-03-24

### Включение OAuth2 в консоли разработчика console.developers.google.com

1. Заходим https://console.developers.google.com под своей учётной записью.
2. Создаём новый проект, например "Nextcloud Social Login".
    - "Местоположение":
        * "Без организации" &ndash; в этом случае параметр "Тип приложения" в "Окно запроса доступа OAuth" будет недоступен (см. пункт 7);
        * "*Название нашей организации*" &ndash; если учётная запись принадлежит каком-либо домену;
3. Дожидаемся создания нашего нового проекта и переключаемся в него.
4. Заходим в раздел "API и сервисы" / "Учётные данные".
5. Здесь выбираем создание учётных данных "Идентификатор клиент OAuth".
6. На предложение "Чтобы создать идентификатор клиента OAuth, укажите название продукта для окна запроса доступа." соглашаемся через кнопку "Настроить окно запроса доступа".
7. В разделе "Окно запроса доступа OAuth" выбираем:
    - "Тип приложения": (данный параметр доступен при создании проекта внутри организации)
        * "Открытый доступ" &ndash; для доступа всем желающим;
        * "Ограниченный доступ" &ndash; только для сотрудников организации;
    - "Название приложения": "Nextcloud Social Login";
    - "Авторизованные домены": "example.com";
    - Нажимаем "Сохранить".
8. В новом окне "Создание идентификатора клиента OAuth" выбираем:
    - "Тип приложения": "Веб-приложение";
    - "Название": "Nextcloud Social Login";
    - "Разрешенные URI перенаправления": "https://example.com/apps/sociallogin/oauth/google";
    - Нажимаем кнопку "Создать".
9. В новом появившемся окошке видим наш "Идентификатор клиента" и "Секрет клиента". Эту информацию введём в соответствующие поля в нашем экземпляре Nextcloud.

### Включение OAuth2 в Nextcloud
После включения nextcloud-приложения "Social Login" (https://example.com/settings/apps/integration/sociallogin) в системных настройках Nextcloud появляется возможность настройки приложения (https://example.com/settings/admin/sociallogin).
В соответствующие поля вносим "Идентификатор клиента" и "Секрет клиента", после чего сохраняем настройки. С этого момента на странице входа в Nextcloud можно наблюдать кнопку "Google", позволяющую осуществить авторизацию с помощью google-аккаунта.
