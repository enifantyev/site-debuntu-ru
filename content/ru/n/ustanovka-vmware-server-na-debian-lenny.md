---
title: "Установка VMWare Server на Debian Lenny"
date: 2011-03-30
weight: 10
description: >
  Установка VMWare Server на Debian Lenny
tags:
  - Debian Lenny
  - VMWare Server
---

2011-03-30

## Установка VMWare Server
Установка VMWare Server проста, если в системе уже установлены необходимые пакеты:
```
# aptitude install linux-headers-`uname -r`
# aptitude install kernel-package libncurses5-dev fakeroot wget bzip2 build-essential
# aptitude install rpm
```
Регистрируемся на сайте www.vmware.com и cкачиваем rpm дистрибутив vmware сервера. Не забываем записать serial number. Устанавливаем vmware сервер командой: `rpm -i --nodeps vmware-server.rpm`. Опция `--nodep`s нужна для отключения проверки зависимостей устанавливаемого пакета, иначе vmware сервер откажется устанавливаться, ругаясь на отсутствие чего-либо.

При установке возможно будет ругань на счёт не той версии компилятора `gcc` и отказ в установке. В этом случае идём в `/usr/bin` и видим там два файла `gcc-4.1` и `gcc-4.3` и одну ссылку `gcc`, указывающую на `gcc-4.3`. Удаляем `gcc` и создаём новую ссылку `gcc`, но уже на `gcc-4.1`:
```
# ln -s gcc-4.1 gcc  #Теперь должно устанавливаться без ругани.
```

На каком-то этапе установщик vmware server предложит установить поддержку сети. Соглашаемся, а дальше выбираем то, что нам нужно. Всего есть три типа сетевой поддержки в VMWare Server:

1. NAT - когда виртуальные машины будут использовать ip-адрес физической машины. В результате достучаться до машин из вне не получится, но на машинах появится инет без лишних сетевых настроек.
2. Host-only сеть - когда на физической машине будет назначен ещё один виртуальный интерфейс, в дополнении к физическим, и виртуальные машины будут иметь ip-адреса из этой виртуальной сетки. Инет на виртуальных машинах не будет доступен, если только не настроить на хост-машине маршрутизацию и т.д. для host-only сети. Удобно для тестирования. 
3. Bridged сетка - когда виртуальные машины настроены на использования реальных ip-адресов. В данном случае виртуальную машину невозможно будет отличить от реальной машины, сидящей в реальной сетке.

Ещё одна засада будет после обновления ядра линукса. VMWare Server откажется запускаться и попросит запустить свой сценарий установки. Ничего страшного. Запускаем предложенный сценарий. Вновь проходим все вопросы и ответы и вновь всё заработало. Замечу, что на этапе установки сетевой поддержки, сценарий предложит оставить предыдущие настройки. Я согласился, но VMWare Server опять не запустился. Выполнив сценарий по полной программе  я получил работающий VMWare Server.

Ссылки для использования:
[Как собрать новое ядро linux](/n/kak-sobrat-novoe-yadro-linux)

## Удаление VMware Server:
```
# rpm -qa | grep VM
```
... тут вылезет "имя пакета"
```
# rpm -e "имя пакета"
```
