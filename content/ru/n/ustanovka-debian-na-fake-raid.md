---
title: "Установка debian на fake raid"
date: 2011-04-01
weight: 10
description: >
  Установка debian на fake raid
tags:
  - RAID
aliases:
  - /note/ustanovka-debian-na-fake-raid
  - /n/ustanovka-vmware-server-na-debian-lenny/
---

<p>Fake raid (фальшивый) - это дешёвые raid контроллеры с урезанной аппаратной частью, которые встраивают, например, в матери, чтобы, видимо, написать в спецификации слово "RAID". Вся работа по работе с рэйд-массивами возложена на драйвер. Аппаратная часть помогает вычислять CRC или что-то подобное. Стоимость такого контроллера несколько долларов-десятков долларов. Полноценный RAID контроллер стоит от пары-тройки сотен долларов и выше.</p>
<p>Я имею дело с дешёвыми Promise рэйд контроллерами, которые, по ощущениям, всё таки лучше, чем встроенные в матери. Во всяком случае, я на промайзах массивы пока не терял. На фэйк рэйдах, встроенных в матери, случаев потери массивов было достаточно настолько, чтобы огорчиться. Правда, чаще восстанавливал, чем терял, но осадок очень большой остался.</p>
<p>Рекомендация: с такими рэйдами лучше не связываться и, если и использовать их, то только как обычные контроллеры с последующей установкой софтового рэйда средствами линукс. Но в некоторых случаях в настройках рэйд-контроллера нет опции, позволяющей использовать его, как обычный контроллер и загружать компьютер без лишних нажатий клавиш. Поэтому на стареньком промайзе установил DMRAID.</p>
<p>Софтовый рэйд плох следующим. Если сдохнет загрузочный винчестер, то после перезагрузки надо будет лезть в БИОС и выставлять загрузочным другой винчестер. Автоматической загрузки не получится, если только не подумать на счёт загрузки с диска, флэшки, дискетки. Ещё мне не всё понятно с загрузкой со второго винчестера. В GRUB'е, насколько я понял,  для загрузки используются уникальные идентификаторы винчестеров. Значит на втором винте софтового зеркала надо делать свой ГРУБ, отличный от ГРУБа первого винчестера. Надо почитать, а то у меня один сервер на софтовом зеркале сделан, но не доделан на эту тему.</p>
<p>Установка debian на fakeraid проста.<br />1. Сунул установочный диск дебиана и загрузился с него.<br />2. Написал опцию в бут строку: expert dmraid=true.</p>
<p>Управление fake raid осуществляется с помощью команды dmraid. В софтовых рэйдах - mdadm.</p>
<p>Пример вывода команды:<br />&gt; dmraid -r<br />/dev/hdg: pdc, "pdc_biaffcjif", mirror, ok, 156301312, data@ 0<br />/dev/hde: pdc, "pdc_biaffcjif", mirror, ok, 156301312, data@ 0</p>
<p>Вот здесь написал - как grub на два винта сделать: <a href="http://debuntu.ru/content/pravilnaya-ustanovka-grub-na-software-raid1">Правильная установка GRUB на Software-RAID1</a></p>
