---
title: "Установка PostgreSQL 9.0 на Debian 6.0"
date: 2011-03-17
weight: 10
description: >
  Установка PostgreSQL 9.0 на Debian 6.0
tags:
  - PostgreSQL
  - DB
---

<p><br />2011-03-17</p>
<h2><a id="Установка Debian 6.0" name="Установка Debian 6.0"></a>Установка Debian 6.0</h2>
<p>Установка произведена с помощью первого CD-диска Debian на виртуальную машину VMWare Player. При установке выбрал метод разметки “Авто - использовать весь диск с шифрованным LVM”. Также использовал схему разметки “Отдельные разделы для /home, /usr, /var, /tmp”. Выбор программного обеспечения, предлагаемый на заключительном этапе установки системы, не производил. Предпочитаю выбрать необходимые пакеты после завершения установки операционной системы.</p>
<h2><a id="Установка необходимых пакетов" name="Установка необходимых пакетов"></a>Установка необходимых пакетов</h2>
<p>После завершения установки Debian 6.0 и перезагрузки системы начал установку пакетов:<br /># aptitude install openssh-server mc less</p>
<h2><a id="Установка и настройка PostgreSQL 9.0" name="Установка и настройка PostgreSQL 9.0"></a>Установка и настройка PostgreSQL 9.0</h2>
<p>Нашёл пакет PostgreSQL 9.0 в <a href="http://backports.debian.org/">Debian Backports</a>. Добавил в /etc/apt/sources.list строку:<br />deb http://backports.debian.org/debian-backports squeeze-backports main<br />Обновил список доступных пакетов:<br /># aptitude update<br />Установил пакет libpq5 (&gt;= 9.0~) из backports:<br /># aptitude -t squeeze-backports install libpq5<br />Следующие НОВЫЕ пакеты будут установлены:        <br />libgcrypt11{a} libgnutls26{a} libgpg-error0{a} libldap-2.4-2{a} libpq5 libsasl2-2{a} libsasl2-modules{a} libtasn1-3{a}<br />Установил PostgreSQL 9.0:<br /># aptitude install postgresql-9.0<br />Следующие НОВЫЕ пакеты будут установлены:        <br />lsb-release{a} openssl{a} postgresql-9.0 postgresql-client-9.0{a} postgresql-client-common{a} postgresql-common{a} python{a} python-minimal{a} python-support{a} python2.6{a} python2.6-minimal{a} ssl-cert{a}<br />…<br />Настраивается пакет postgresql-client-9.0 (9.0.3-1~bpo60+1) ...<br />update-alternatives: используется `/usr/share/postgresql/9.0/man/man1/psql.1.gz' для предоставления `/usr/share/man/man1/psql.1.gz' (psql.1.gz) в автоматический режим.<br />Настраивается пакет ssl-cert (1.0.28) ...<br />Настраивается пакет postgresql-common (113) ...<br />Добавление пользователя postgres в группу ssl-cert<br />Building PostgreSQL dictionaries from installed myspell/hunspell packages...<br />Настраивается пакет postgresql-9.0 (9.0.3-1~bpo60+1) ...<br />Creating new cluster (configuration: /etc/postgresql/9.0/main, data: /var/lib/postgresql/9.0/main)...<br />Moving configuration file /var/lib/postgresql/9.0/main/postgresql.conf to /etc/postgresql/9.0/main...<br />Moving configuration file /var/lib/postgresql/9.0/main/pg_hba.conf to /etc/postgresql/9.0/main...<br />Moving configuration file /var/lib/postgresql/9.0/main/pg_ident.conf to /etc/postgresql/9.0/main...<br />Configuring postgresql.conf to use port 5432...<br />update-alternatives: используется `/usr/share/postgresql/9.0/man/man1/postmaster.1.gz' для предоставления `/usr/share/man/man1/postmaster.1.gz' (postmaster.1.gz) в автоматический режим.<br />Starting PostgreSQL 9.0 database server: main.<br />Обрабатываются триггеры для python-support ...<br />Установил пароль нового юзера postgres, появившегося после установки постгреса:<br /># passwd postgres<br />Сменил текущего пользователя и зашёл в терминал PostgreSQL’а:<br /># su -l postgres<br />$ psql<br />psql (9.0.3)<br />Type "help" for help.<br />Сменил пароль администратора базы данных, вышел из терминала и вернулся в контекст root’а:<br />postgres=# alter user postgres with password ’63S7kv8gLLtiRp2b’;<br />ALTER ROLE<br />postgres=# \q<br />$ exit</p>
<h2><a id="Установка phppgadmin" name="Установка phppgadmin"></a>Установка phppgadmin</h2>
<p># aptitude install phppgadmin<br />...<br />Настраивается пакет apache2-mpm-prefork (2.2.16-6) ...<br />Starting web server: apache2apache2: Syntax error on line 227 of /etc/apache2/apache2.conf: Could not open configuration file /etc/apache2/conf.d/phppgadmin: No such file or directory<br />Action 'start' failed.<br />The Apache error log may have more information.<br />failed!<br />invoke-rc.d: initscript apache2, action "start" failed.<br />…<br />Creating config file /etc/php5/apache2/php.ini with new version<br />Action 'configtest' failed.<br />The Apache error log may have more information.<br />Your apache2 configuration is broken, so we're not restarting it for you.<br />Настраивается пакет php5-cli (5.3.3-7) ...<br />…<br />Чтобы заходит в phppgadmin с других компьютеров необходимо:<br />В /etc/phppgadmin/apache2.conf раскомментируем строку "allow from all".<br />В /etc/phppgadmin/config.inc.php отключаем:<br />$conf['extra_login_security'] = false;<br />и перезапускаем Апач:<br /># service apache2 restart</p>
