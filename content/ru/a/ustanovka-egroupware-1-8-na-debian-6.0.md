---
title: "Установка egroupware 1.8 на debian 6.0"
date: 2011-03-07
weight: 10
description: >
  Установка egroupware 1.8 на debian 6.0
tags:
  - groupware
  - EGroupWare
---

<p>Автор: Евгений Нифантьев<br />Статус: не завершено<br />Дата: 2011-03-07<br />ОС: Debian 6.0 x64<br />Приложения: eGroupWare 1.8, MySQL 5.1.49</p>
<h2><a id="Установка Debian 6.0" name="Установка Debian 6.0"></a>Установка Debian 6.0</h2>
<p>Установка произведена с помощью первого CD-диска Debian на виртуальную машину VMWare Player. При установке выбрал метод разметки “Авто - использовать весь диск с шифрованным LVM”. Также использовал схему разметки “Отдельные разделы для /home, /usr, /var, /tmp”. Выбор программного обеспечения, предлагаемый на заключительном этапе установки системы, не производил. Предпочитаю выбрать необходимые пакеты после завершения установки операционной системы.</p>
<h2><a id="EGW 1.8: Установка необходимых пакетов" name="EGW 1.8: Установка необходимых пакетов"></a>Установка необходимых пакетов</h2>
<p>После завершения установки Debian 6.0 и перезагрузки системы начал установку пакетов:<br /># aptitude install openssh-server mc less</p>
<h2><a id="Установка eGroupWare 1.8" name="Установка eGroupWare 1.8"></a>Установка eGroupWare 1.8</h2>
<p>Добавил в /etc/apt/sources.list строку:<br /># sed -i '$ a deb http://download.opensuse.org/repositories/server:/eGroupWare/Debian_6.0/ ./' /etc/apt/sources.list<br />Установил ключ этого репозитория:<br /># wget -O - http://download.opensuse.org/repositories/server:/eGroupWare/Debian_6.0/Release.key | apt-key add -<br /># aptitude update<br /># aptitude install egroupware<br />Следующие НОВЫЕ пакеты будут установлены:        <br /> apache2{a} apache2-mpm-prefork{ab} apache2-mpm-worker{ab} apache2-utils{a}<br /> apache2.2-bin{a} apache2.2-common{a} egroupware egroupware-addressbook{a}<br /> egroupware-bookmarks{a} egroupware-calendar{a} egroupware-core{a}<br /> egroupware-developer-tools{a} egroupware-egw-pear{a} egroupware-emailadmin{a}<br /> egroupware-etemplate{a} egroupware-felamimail{a} egroupware-filemanager{a}<br /> egroupware-importexport{a} egroupware-infolog{a} egroupware-manual{a}<br /> egroupware-news-admin{a} egroupware-notifications{a} egroupware-phpbrain{a}<br /> egroupware-phpsysinfo{a} egroupware-polls{a} egroupware-projectmanager{a}<br /> egroupware-registration{a} egroupware-resources{a} egroupware-sambaadmin{a}<br /> egroupware-sitemgr{a} egroupware-timesheet{a} egroupware-tracker{a} egroupware-wiki{a}<br /> fontconfig-config{a} heirloom-mailx{a} jpgraph{a} libapache2-mod-php5{a} libapr1{a}<br /> libaprutil1{a} libaprutil1-dbd-sqlite3{a} libaprutil1-ldap{a} libc-client2007e{a}<br /> libcap2{a} libdbd-mysql-perl{a} libdbi-perl{a} libfontconfig1{a} libgcrypt11{a}<br /> libgd2-xpm{a} libgnutls26{a} libgpg-error0{a} libhtml-template-perl{a} libjpeg62{a}<br /> libldap-2.4-2{a} libltdl7{a} libmcrypt4{a} libmysqlclient16{a} libnet-daemon-perl{a}<br /> libonig2{a} libplrpc-perl{a} libpng12-0{a} libqdbm14{a} libsasl2-2{a} libsasl2-modules{a}<br /> libsqlite0{a} libt1-5{a} libtasn1-3{a} libxpm4{a} mlock{a} mysql-client-5.1{a}<br /> mysql-common{a} mysql-server{a} mysql-server-5.1{a} mysql-server-core-5.1{a} openssl{a}<br /> php-apc{a} php-log{a} php-pear{a} php5{a} php5-cli{a} php5-common{a} php5-gd{a}<br /> php5-imap{a} php5-ldap{a} php5-mcrypt{a} php5-mysql{a} php5-sqlite{a} php5-suhosin{a}<br /> psmisc{a} ssl-cert{a} tnef{a} ttf-dejavu-core{a}<br />0 пакетов обновлено, 91 установлено новых, 0 пакетов отмечено для удаления, и 0 пакетов не обновлено.<br />Необходимо получить 63,7 MB архивов. После распаковки 191 MB будет занято.<br />Следующие пакеты имеют неудовлетворённые зависимости:<br /> apache2-mpm-worker: Конфликтует: apache2-mpm который является виртуальным пакетом.<br /> apache2-mpm-prefork: Конфликтует: apache2-mpm который является виртуальным пакетом.<br />Следующие действия разрешат зависимости:<br />    Сохранить для следующих пакетов их текущие версии:<br />1)     apache2-mpm-worker [Не установлен]              <br />Принять данное решение? [Y/n/q/?] y<br />Следующие НОВЫЕ пакеты будут установлены:<br /> apache2{a} apache2-mpm-prefork{a} apache2-utils{a} apache2.2-bin{a} apache2.2-common{a}<br /> egroupware egroupware-addressbook{a} egroupware-bookmarks{a} egroupware-calendar{a}<br /> egroupware-core{a} egroupware-developer-tools{a} egroupware-egw-pear{a}<br /> egroupware-emailadmin{a} egroupware-etemplate{a} egroupware-felamimail{a}<br /> egroupware-filemanager{a} egroupware-importexport{a} egroupware-infolog{a}<br /> egroupware-manual{a} egroupware-news-admin{a} egroupware-notifications{a}<br /> egroupware-phpbrain{a} egroupware-phpsysinfo{a} egroupware-polls{a}<br /> egroupware-projectmanager{a} egroupware-registration{a} egroupware-resources{a}<br /> egroupware-sambaadmin{a} egroupware-sitemgr{a} egroupware-timesheet{a}<br /> egroupware-tracker{a} egroupware-wiki{a} fontconfig-config{a} heirloom-mailx{a} jpgraph{a}<br /> libapache2-mod-php5{a} libapr1{a} libaprutil1{a} libaprutil1-dbd-sqlite3{a}<br /> libaprutil1-ldap{a} libc-client2007e{a} libcap2{a} libdbd-mysql-perl{a} libdbi-perl{a}<br /> libfontconfig1{a} libgcrypt11{a} libgd2-xpm{a} libgnutls26{a} libgpg-error0{a}<br /> libhtml-template-perl{a} libjpeg62{a} libldap-2.4-2{a} libltdl7{a} libmcrypt4{a}<br /> libmysqlclient16{a} libnet-daemon-perl{a} libonig2{a} libplrpc-perl{a} libpng12-0{a}<br /> libqdbm14{a} libsasl2-2{a} libsasl2-modules{a} libsqlite0{a} libt1-5{a} libtasn1-3{a}<br /> libxpm4{a} mlock{a} mysql-client-5.1{a} mysql-common{a} mysql-server{a}<br /> mysql-server-5.1{a} mysql-server-core-5.1{a} openssl{a} php-apc{a} php-log{a} php-pear{a}<br /> php5{a} php5-cli{a} php5-common{a} php5-gd{a} php5-imap{a} php5-ldap{a} php5-mcrypt{a}<br /> php5-mysql{a} php5-sqlite{a} php5-suhosin{a} psmisc{a} ssl-cert{a} tnef{a}<br /> ttf-dejavu-core{a}<br />0 пакетов обновлено, 90 установлено новых, 0 пакетов отмечено для удаления, и 0 пакетов не обновлено.<br />Необходимо получить 63,7 MB архивов. После распаковки 191 MB будет занято.<br />Хотите продолжить? [Y/n/?] y<br />В процессе установки появилось окно с предложением задать пароль для root от mysql-сервера. Сделал.<br />Далее появилось окно “Настраивается пакет egroupware”:<br />Главный администратор может изменять различные глобальные настройки и добавлять домены eGroupWare через специальный веб-интерфейс.<br />Логин главного администратора:<br />admin<br />Оставил без изменений. На следующем окне задал пароль для этого admin’а.<br />Далее появилось ещё одно окно “Настраивается пакет egroupware”:<br />Installation will create a first EGroupware user with adminstration right, with whom further users can be created.<br />Admin user<br />sysop<br />Оставил sysop’а без изменений и на следующем окне задал ему пароль.<br />Далее появилось окно “Настраивается пакет egroupware”:<br />Specify a language for your installation, eg: de, en, fr<br />Language<br />en<br />Я выбрал английский язык.<br />На следующем окне оставил без изменений логин администратора mysql-сервера - root. И далее набрал его пароль, который уже задавал минутой раньше при установке пакета mysql-server.<br />Установка закончилась с предложением зайти на установленный egroupware по адресу: http://localhost/egroupware/ или написать вместо localhost сетевое имя сервера, если вход на сервер выполняется с другого компьютера.</p>
<h2><a id="Русификация eGroupWare" name="Русификация eGroupWare"></a>Русификация eGroupWare</h2>
<p>Захожу на сервер, где установлен eGroupWare, через браузер по адресу http://192.168.0.1/egroupware/setup/ и вхожу в “Setup/Config Admin Login” под admin’ом. Нажимаю на кнопку “Управление языками”. Выбираю язык “Russian” и выбираю метод обновления “Удалить старые языки и установить новые”. Жму “Установить”. Выхожу из конфигурирования.<br />Захожу на http://192.168.0.1/egroupware и использую учётные данные sysop’а. Жму в левом верхнем углу “Preferences”. Чуть ниже жму "Common Preferences". Перехожу на “Default Preferences”. Заполняю поля Country, Language, Spellchecker language, Currency - р, Charset for the CSV export - utf-8. Жму “Apply”. После следующего нажатия на любую ссылку наблюдаю русифицированный интерфейс.<br />В “Управлении проектами”, при создании нового проекта и дальнейшем его просмотре вижу крякозябры вместо русских букв названия проекта. Посмотрев доступные настройки в “Управление проектами” - “Конфигурирование сайта” попробовал сделать так:<br /># sed -i '$ a deb http://ftp.ru.debian.org/debian squeeze main contrib' /etc/apt/sources.list<br /># apt-get update<br /># apt-get install ttf-mscorefonts-installer<br /># cp /usr/share/fonts/truetype/msttcorefonts/* /usr/share/egroupware/projectmanager/inc/ttf-bitstream-vera-1.10/<br />Потом зашёл в “Управление проектами” - “Конфигурирование сайта” - “Таблица символов шрифта” - iso-8859-1 - поменял на utf-8.<br />Шрифт - Arial (MS).<br />Кодировать как не-ascii - Нет.<br />Вроде помогло в данном случае.</p>
<h2><a id="Проверка установки eGroupWare" name="Проверка установки eGroupWare"></a>Проверка установки eGroupWare</h2>
<p>Захожу в http://192.168.50.131/egroupware/setup/ - "Учетная запись Администратора Установки/Конфигурирования" под учётной записью admin'а. В левом меню выбираю "Проверка установки". Вижу одну ошибку установки:<br />Проверка php.ini: date.timezone set and not "System/Localtime": ini_get('date.timezone')=''<br />No VALID timezone set! ("System/Localtime" is NOT sufficient, you have to use a timezone identifer like "Europe/Berlin", see full list of valid identifers)<br />И восемь предупреждений:</p>
<ol>
<li>Проверка расширения pgsql загружена или загружаема: Ошибка<br />Если вы планируете использовать базу данных pgSQL, то необходимо расширение pgsql</li>
<li>Проверка расширения pdo_pgsql загружена или загружаема: Ошибка<br />Если вы планируете использовать базу данных pgSQL, то необходимо расширение pdo_pgsql</li>
<li>Проверка расширения odbc загружена или загружаема: Ошибка<br />Если вы планируете использовать базу данных MaxDB, MsSQL or Oracle, то необходимо расширение odbc</li>
<li>Проверка расширения pdo_odbc загружена или загружаема: Ошибка<br />Если вы планируете использовать базу данных MaxDB, MsSQL or Oracle, то необходимо расширение pdo_odbc</li>
<li>Проверка расширения oci8 загружена или загружаема: Ошибка<br />Если вы планируете использовать базу данных Oracle, то необходимо расширение oci</li>
<li>Проверка расширения pdo_oci загружена или загружаема: Ошибка<br />Если вы планируете использовать базу данных Oracle, то необходимо расширение pdo_oci</li>
<li>Проверка наличия установленного PEAR ::Auth_SASL: Ошибка<br />EMailAdmin, felamimail нуждается в PEAR::Auth_SASL Вы можете установить это запустив: pear install Auth_SASL</li>
<li>Проверка наличия установленного PEAR ::XML_Feed_Parser: Ошибка<br />NewsAdmin нуждается в PEAR::XML_Feed_Parser Вы можете установить это запустив: pear install XML_Feed_Parser</li>
</ol>
<p>Для исправления ошибки ищу в файле /etc/php5/apache2/php.ini соответствующую закомментированную строку и исправляю:<br />date.timezone = Europe/Moscow<br />Другие значения можно найти на странице <a href="http://www.php.net/manual/ru/timezones.php">PHP: Список поддерживаемых часовых поясов</a>.<br />Теперь смотрю предупреждения и вижу, что первые шесть могу проигнорировать, так как использую базу данных MySQL. Для исправления двух последних предупреждений следую подсказкам, которые написаны в предупреждениях:<br /># pear install Auth_SASL<br /># pear install XML_Feed_Parser</p>
